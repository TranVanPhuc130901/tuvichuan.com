function thongBao(n,t){taoThongBao();$("#divNoiDungThongBao").html(t);n=parseInt(n)/1e3;var i=self.setInterval(function(){n--;n<0&&(window.clearInterval(i),huyThongBao())},1e3)}function taoThongBao(){$("body").append("<div id='divThongBao'><div id='divKhungThongBao'><div id='divNoiDungThongBao'><!----><\/div><\/div><\/div>");$("#divThongBao").attr("style","background:#daf2e4;position:fixed;_position:absolute;top:10px;right:10px;z-index:9999;display:none;width:250px;max-width:calc(100% - 20px)");$("#divKhungThongBao").attr("style","position:relative;padding:15px");$("#divNoiDungThongBao").attr("style","color:#61c257");$("#divThongBao").show()}function huyThongBao(){$("#divThongBao").hide();$("#divThongBao").remove()}function buyNow(){var r=$("#id_pro").val(),u=$(".size-item.active").attr("i"),n="",t="",f="",i,o;size=$(".listSize .size-item.active").text();n=$(".listColor .color-item.active").attr("data-color");t=$(".listColor .color-item.active").find("img");i=$(".box_choosenumber .choosenumber_details .hdQuantity_details").val();let e=$(".inventoryProduct span").text();if(o=Math.floor(Math.random()*1e4)+1,t.length>0&&(f=t.attr("src")),dataVariant.length>0){if(n===undefined||n===""){thongBao(3e3,"Mời bạn chọn màu sắc");return}if(size===""||size===undefined){thongBao(3e3,"Mời bạn chọn size");return}if(i==="0"){thongBao(3e3,"Sản phẩm này đã hết");return}}jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"BuyNow",id:r,num:i,mi:u,inventory:e},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){n[0]==="Success"?(CountItemsInCart(),location.href="/gio-hang.htm"):thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function AddToCart(){var f=$("#id_pro").val(),t="",n="",i="",r="",e=$(".box_choosenumber .choosenumber_details .hdQuantity_details").val(),u;if(t=$(".listSize .size-item.active").text(),n=$(".listColor .color-item.active").attr("data-color"),i=$(".listColor .color-item.active").find("img"),u=Math.floor(Math.random()*1e4)+1,i.length>0&&(r=i.attr("src")),dataVariant.length>0){if(n===undefined||n===""){thongBao(3e3,"Mời bạn chọn màu sắc");return}if(t===""){thongBao(3e3,"Mời bạn chọn size");return}}jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"AddToCart",id:f,num:e,size:t,color:n,image:r,randomNumber:u},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){n[0]==="Success"?CountItemsInCart():thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function RemoveItemInCart(n,t,i,r,u){jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"RemoveItemInCart",id:n,size:t,color:i,image:r,randomNumber:u},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){n[0]||(location.href="/gio-hang-trong.htm");thongBao(3e3,"Cập nhật thành công.");$("#list_items").html(n[0]);updateQuantityCart();CountItemsInCart()},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function UpdateCart(n,t,i){jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"UpdateCart",mi:n,newNumber:t,id:i},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){thongBao(3e3,"Cập nhật thành công.");$(".area_total").html(n[0]);$("#list_items .colinfo-left .info").each(function(){var t=$(this).attr("data-idcart");t===i&&($(this).html(""),$(this).html(n[1]))});CountItemsInCart();UpdateImageCart()},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function GetInventoryProduct(n){jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"GetInventoryProduct",id:n},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){console.log(n[0])},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function updateQuantityCart(){var n=$(".choosenumber").attr("inv");$(".choosenumber").each(function(){var t=jQuery(this),r=t.find('input[type="number"]'),f=t.find(".augment"),u=t.find(".abate"),e=r.attr("min"),o=n,i;f.on("click",function(){var n=parseFloat(r.val());i=n>=o?n:n+1;t.find("input").val(i);t.find("input").trigger("change");u.addClass("active")});u.on("click",function(){var n=parseFloat(r.val());i=n<=e?n:n-1;t.find("input").val(i);t.find("input").trigger("change");i==1&&u.removeClass("active")})})}function CountItemsInCart(){jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"CountItemsInCart"},success:function(n){$("#minicart-quantity").html(n[0])},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function UpdateImageCart(){$("#list_items .listorder li").each(function(){var n=$(this).find(".colimg"),t=$(this).find("#select-color option:selected").attr("imagesrc");n.find("img").attr("src",t)})}function SubmitCart(n){if(n.preventDefault(),!$("#FormDH")[0].checkValidity()){$("#FormDH")[0].reportValidity();return}var t=$("#tbName").val(),i=$("#tbPhone").val(),r=$("#tbEmail").val(),u=$("#tbAddress").val(),f=$("#tbMessage").val();jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",data:{action:"SubmitCart",name:t,phone:i,email:r,address:u,message:f},beforeSend:function(){loading(!0);$("#FormDH button[type=submit]").attr("disabled",!0)},complete:function(){loading(!1);$("#FormDH button[type=submit]").attr("disabled",!0)},success:function(){location.href="/dat-hang-thanh-cong.htm"},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function GetImageByIdToColor(n){jQuery.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",data:{action:"GetImageProductById",id:n},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){var i=JSON.parse(n),o,f,r,u,s,e,h,t,c;if(Array.isArray(i)&&i.length>0&&i[0]!==""){for(o=$(".box_gothiarGallery"),f=$(".box_gothiarGallery .gothiar_shop_gallery"),f.length>0&&f.hide(),o.html(i[0]),r=$(".box_gothiarGallery .gothiar_shop_gallery1"),r.addClass("owl-carousel"),r.owlCarousel("destroy"),r.owlCarousel({loop:!0,nav:!0,items:2,lazyLoad:!0,center:!0,navText:['<svg width="16" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.701,14.276l9.586-9.585c0.879-0.878,2.317-0.878,3.195,0l0.801,0.8c0.878,0.877,0.878,2.316,0,3.194  L13.968,16l7.315,7.315c0.878,0.878,0.878,2.317,0,3.194l-0.801,0.8c-0.878,0.879-2.316,0.879-3.195,0l-9.586-9.587  C7.229,17.252,7.02,16.62,7.054,16C7.02,15.38,7.229,14.748,7.701,14.276z"/><\/svg>','<svg width="16" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.701,14.276l9.586-9.585c0.879-0.878,2.317-0.878,3.195,0l0.801,0.8c0.878,0.877,0.878,2.316,0,3.194  L13.968,16l7.315,7.315c0.878,0.878,0.878,2.317,0,3.194l-0.801,0.8c-0.878,0.879-2.316,0.879-3.195,0l-9.586-9.587  C7.229,17.252,7.02,16.62,7.054,16C7.02,15.38,7.229,14.748,7.701,14.276z"/><\/svg>']}),u=[],s="",e=0;e<dataVariant.length;e++)for(h=$(".color-item.active").attr("data-color"),t=0;t<dataVariant.length;t++)h===dataVariant[t].color&&(c=dataVariant[t].size,u.push(c),s=dataVariant[t].inventory);u.length>0&&displaySize(u,["S","M","L","XL","XXL"])}},error:function(){thongBao(3e3,"Hệ thống đang bận, bạn vui lòng thử lại sau nhé!")}})}function displaySize(n,t){$(".size-item").each(function(){for(var r=$(this).text().trim(),u=!1,i=0;i<n.length;i++)if(n[i]===r){u=!0;break}!u&&t.includes(r)?$(this).addClass("hide"):$(this).removeClass("hide")})}$(".product_categories").on("click",".label",function(){$(this).toggleClass("active");$(this).next().slideToggle("fast")});$(".product_filters").on("change","input[type=checkbox]",function(){var r=$("#hd_group_id").val(),t=$("#hd_raw_url").val(),n="",i;$(".product_filters input[type=checkbox]").each(function(){this.checked&&(n+=$(this).val()+",")});n.length>0&&(n=n.substring(0,n.length-1));i="/"+t+".htm?filter="+n;$.ajax({url:"/Areas/Display/Ajax/Product.aspx",type:"POST",dataType:"json",data:{action:"FilterProduct",filter:n,gId:r,rawUrl:t},beforeSend:function(){loading(!0)},complete:function(){loading(!1)},success:function(n){$(".gothiar_shop_right").html(n[0]);history.pushState({},null,i)},error:function(){}})});$(".gothiar_shop_gallery").length>0&&$(".gothiar_shop_gallery").owlCarousel({loop:!0,nav:!0,items:2,lazyLoad:!0,center:!0,navText:['<svg width="16" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.701,14.276l9.586-9.585c0.879-0.878,2.317-0.878,3.195,0l0.801,0.8c0.878,0.877,0.878,2.316,0,3.194  L13.968,16l7.315,7.315c0.878,0.878,0.878,2.317,0,3.194l-0.801,0.8c-0.878,0.879-2.316,0.879-3.195,0l-9.586-9.587  C7.229,17.252,7.02,16.62,7.054,16C7.02,15.38,7.229,14.748,7.701,14.276z"/><\/svg>','<svg width="16" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.701,14.276l9.586-9.585c0.879-0.878,2.317-0.878,3.195,0l0.801,0.8c0.878,0.877,0.878,2.316,0,3.194  L13.968,16l7.315,7.315c0.878,0.878,0.878,2.317,0,3.194l-0.801,0.8c-0.878,0.879-2.316,0.879-3.195,0l-9.586-9.587  C7.229,17.252,7.02,16.62,7.054,16C7.02,15.38,7.229,14.748,7.701,14.276z"/><\/svg>']});typeof dataVariant!="undefined"&&document.addEventListener("DOMContentLoaded",function(){var n,e,o,s,h;if(dataVariant.length>0){var c=document.querySelector(".listColor"),l=document.querySelector(".listSize"),u=new Set,f=new Set;for(n=0;n<dataVariant.length;n++){var i=dataVariant[n].color,t=dataVariant[n].size,a=dataVariant[n].image,r=dataVariant[n].id,y=dataVariant[n].colorReplace,v=dataVariant[n].mi;u.has(i)||(e=`<button class="color-item" dti="${r}" onclick="GetImageByIdToColor(${r})" data-color="${i}">${a}</button>`,c.innerHTML+=e,u.add(i));f.has(t)||(o=`<div class="size-item" mi="${v}" i="${r}" dtSize='${t}'>${t}</div>`,l.innerHTML+=o,f.add(t))}}else s=document.querySelector(".box-color"),h=document.querySelector(".box-size"),s.remove(),h.remove()});$(document).ready(function(){function i(i,u){for(let n=0;n<dataVariant.length;n++)if(dataVariant[n].size===u&&dataVariant[n].color===i){t=dataVariant[n].inventory;break}$(".inventoryProduct span").text(t);r(n.val())}function r(i){i>=1?i>t?n.val(t):n.val(i):n.val(n.val())}let o=$(".color-item:first-child").attr("dti");GetImageByIdToColor(o);$(".size-item:first-child").addClass("active");$(".color-item:first-child").addClass("active");typeof dataVariant!="undefined"&&dataVariant.length>0&&$(".inventoryProduct span").text(dataVariant[0].inventory);$(".size-item").click(function(){let n=$(".color-item.active").attr("data-color"),t=$(this).attr("dtsize");$(this).hasClass("hide")||($(".size-item").removeClass("active"),$(this).addClass("active"),i(n,t))});$(".color-item").click(function(){let n=$(this).attr("data-color"),t=$(".size-item.active").attr("dtsize");if(typeof dataVariant!="undefined"){let t=dataVariant.filter(t=>t.color===n).map(n=>n.size);t.length>0&&displaySize(t,["S","M","L","XL","XXL"])}$(".color-item").removeClass("active");$(this).addClass("active");i(n,t)});const n=$(".box_choosenumber .hdQuantity_details");let f=$(".color-item.active").attr("data-color"),e=$(".size-item.active").attr("dtsize"),t="";$(".color-item").click(function(){f=$(this).attr("data-color");i(f,e)});$(".size-item").click(function(){e=$(this).attr("dtsize");i(f,e)});n.on("change",function(){r(n.val())});$(".box_choosenumber .abate_details").click(function(){const t=n.val(),i=t-1;r(i)});$(".box_choosenumber .augment_details").click(function(){const u=parseInt(n.val());let i=u+1;i>t&&(i=t);r(i)});const u=$(".tb_wholesale"),s=$(".btn-moreWholesale"),h=$(".close-box_wholesale");s.click(function(){u.is(":visible")?u.hide("slow"):u.show("slow")});h.click(function(){u.hide("slow")})});